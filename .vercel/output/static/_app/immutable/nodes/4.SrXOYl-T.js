import{g as l}from"../chunks/api.CPSkk_H2.js";import{v as m}from"../chunks/views.CsD7ccHN.js";import{a as u,t as c}from"../chunks/disclose-version.DhBPWEzS.js";import{p as d,t as f,a as _,s as x,v as h,c as r,r as p,a7 as w}from"../chunks/runtime.CkbBmVUN.js";import{s as b}from"../chunks/render.BrEZX-Uy.js";import{i as y}from"../chunks/lifecycle.DBvMT_G9.js";import{p as $}from"../chunks/props.BJn1IbXj.js";import{R as P}from"../chunks/ResultsPage.DTZfN4fA.js";async function S({fetch:i,url:n,params:e}){const t=m[e.view],s=n.searchParams.get("page")??"1",a=await l(i,t.endpoint,{page:s});return{view:e.view,title:t.title,endpoint:t.endpoint,movies:a.results,next_page:a.page<a.total_pages?a.page+1:null,infinite:!0}}const B=Object.freeze(Object.defineProperty({__proto__:null,load:S},Symbol.toStringTag,{value:"Module"}));var j=c('<div class="column svelte-9b8h0p"><h1> </h1> <!></div>');function C(i,n){d(n,!1);let e=$(n,"data",12);y();var t=j(),s=r(t),a=r(s,!0);p(s);var g=x(s,2),v=w(()=>e().next_page?`/movies/${e().view}?page=${e().next_page}`:null);P(g,{get movies(){return e().movies},get next(){return h(v)},$$events:{end:async()=>{if(!e().next_page)return;const o=await l(fetch,e().endpoint,{page:String(e().next_page)});e(e().movies=[...e().movies,...o.results],!0),e(e().next_page=o.page<o.total_pages?o.page+1:null,!0)}}}),p(t),f(()=>b(a,e().title)),u(i,t),_()}export{C as component,B as universal};
